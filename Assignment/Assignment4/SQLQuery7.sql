SELECT *, (SELECT COUNT(*) FROM MessageAttachments WHERE MessageId = Messages.Id) as AttachmentCount FROM Messages;